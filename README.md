# Mysti
統宣易經APP 2025 是一款基於易經卦象的占卜與預測應用App，主要目的在為用戶提供多語言的趨勢預測、每日提醒和肯定語服務。該App將支援 iOS 和 Android 平台，並整合金流系統以支援用戶付款購買高級功能。

## 系統概述
統宣易經APP 2025 系統為用戶提供一個跨平台 (手機/平板/桌面)的占卜App，具備以下核心功能：
* 用戶註冊與登入（支援第三方認證）
* 多語言支援（繁體中文、簡體中文、英文、日文、韓文）
* 占卜功能（趨勢預測、每日提醒、肯定語）
* 占卜記錄管理（儲存、查看、刪除）
* 支付與訂閱管理（內購、Google Play、Line支付、信用卡）
* 後台管理系統（內容管理、用戶管理、圖片管理）
* 通知系統（推送通知、應用內通知）
* 數據安全與隱私保護

系統將採用分層架構，前端使用跨平台 iOS 和 Android 開發，後端選擇 Node.js + Express 。資料庫選擇 PostgreSQL 或 MongoDB，支付整合使用 Apple IAP、Google Play 支付系統、Line支付及信用卡支付。

## 系統架構圖

```
+---------------------+          +---------------------+
|     前端應用        |          |   管理後台系統      |
| (iOS & Android Cross-Platform Apps) |          | (React)    |
+----------+----------+          +----------+----------+
           |                               |
           | HTTPS API 請求                | HTTPS API 請求
           |                               |
           v                               v
+----------+----------+          +----------+----------+
|      後端服務       |          |     後端服務        |
| (Node.js + Express  |          | (Node.js + Express  |
|      或 Firebase)    |          |      或 Firebase)    |
+----------+----------+          +----------+----------+
           |                               |
           | RESTful API / GraphQL         | RESTful API / GraphQL
           |                               |
           v                               v
+----------+----------+          +----------+----------+
|      資料庫         |          |   第三方服務整合    |
| (PostgreSQL /       |          | (Apple IAP, Google Play, Line, Credit Card) |
|   MongoDB)          |          | (Firebase Auth)     |
+----------+----------+          +---------------------+
           |
           | SQL/NoSQL 查詢
           |
           v
+----------+----------+
|    內容分發網絡     |
|         (CDN)       |
+---------------------+
```
## 占卜模組架構分為以下主要組件：

## 前端應用 
* 提供用戶輸入數字界面。
* 展示卦象、變卦及其文案解釋。

## 後端服務 
* 接收用戶輸入的數據。
* 根據算法生成卦象和變卦。
* 從數據庫檢索相關文案並返回給前端。

## 數據庫 
* 儲存六十四卦及其變卦的文案和圖片。
* 支援多語言存儲與檢索。

## 緩存層 
* 使用 Redis 加速頻繁調用的卦象數據檢索。

## 通知模組 
* 向用戶推送每日的占卜結果與提醒。

占卜模組架構圖

```                        +-------------------+
                          |   前端應用        |
                          | (iOS/Android)    |
                          +--------+----------+
                                   |
                                   | HTTP 請求 (用戶輸入數據)
                                   v
                          +--------+----------+
                          |   後端服務       |
                          | (Node.js/Firebase)|
                          +--------+----------+
                                   |
             +---------------------+-----------------------+
             |                                             |
   卦象生成邏輯                                    變卦邏輯計算
   (數字映射 -> 卦象ID)                        (條件檢查 -> 變卦ID)
             |                                             |
             +---------------------+-----------------------+
                                   |
                         API 返回結果 (卦象與文案)
                                   |
                                   v
                         +--------+----------+
                         |   資料庫         |
                         | (PostgreSQL/MongoDB)|
                         +--------+----------+
                                   |
             +---------------------+-----------------------+
             |                                             |
   主卦/變卦文案檢索                                  多語言支援
             |                                             |
             +---------------------+-----------------------+
                                   |
                      數據返回給後端 (JSON 格式)
                                   |
                                   v
                          +--------+----------+
                          |   緩存層         |
                          |     (Redis)      |
                          +--------+----------+
                                   |
                                   |
                                   v
                          +--------+----------+
                          |  通知模組         |
                          |  (每日提醒推送)  |
                          +-------------------+
```

## 數據流說明
* 數字輸入： 
* 用戶通過前端應用輸入三個隨機數字，數據被發送到後端服務。

## 邏輯計算： 
後端服務根據數字計算主卦和變卦，查詢數據庫中對應的文案。
如果數據已緩存，則直接從 Redis 返回，否則查詢數據庫。

## 數據返回： 
將卦象名稱、解釋文案及變卦訊息返回給前端。

* 通知推送： 
通知模組每日自動向用戶推送占卜提醒和相關建議。
